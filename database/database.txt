#Bild als BLOB kommt noch in die Tabelle rezept

create database if not exists kellerverw;
use kellerverw;

CREATE TABLE if not exists rezept (
RezID int auto_increment not null primary key,
Name varchar(50) not null,
Anleitung varchar(1000) not null
);

CREATE TABLE if not exists zutat (
ZutID int auto_increment not null primary key,
Name varchar(50) not null,
minMange float not null,
Einheit varchar(5) not null
);

CREATE TABLE if not exists fusion (
Menge float,
ZutID int not null,
RezID int not null,
Foreign key (ZutID) references Zutat (ZutID),
Foreign key (RezID) references Rezept (RezID),
Primary key (RezID, ZutID)
);

insert into rezept (Name, Anleitung) values ("Schoki Muffin", "Oamfach alles zammen schuetten");

insert into zutat (Name, minMange, Einheit) values ("Mehl", 5, "kg");
insert into zutat (Name, minMange, Einheit) values ("Zucker",3,"kg");
insert into zutat (Name, minMange, Einheit) values ("Milch",2,"L");

insert into fusion (Menge, ZutID, RezID) values (0.3,1,1);
insert into fusion (Menge, ZutID, RezID) values (0.25,2,1);
insert into fusion (Menge, ZutID, RezID) values (0.12,3,1);

#Nach weiteren INSTER-Befehlen, hier der Join um alles zu sehen:
SELECT r.name, z.name, f.menge from Rezept r join fusion f on f.RezID = r.RezID join Zutat z on f.ZutID = z.ZutID;

#Join, wenn ma nur die Schoki Muffins haben will UND die Einheit:
SELECT r.name, z.name, f.menge, z.einheit from Rezept r join fusion f on f.RezID = r.RezID join Zutat z on f.ZutID = z.ZutID where r.RezID = 1;


#Blob Bild Versuche:
alter table rezept add Bild blob;

#insert Versuch:
insert into rezept (Name, Anleitung, Bild) values ('lebkuchen', 'Honig pickt hart he', LOAD_FILE('C:\Users\Emma Mango Jango\Desktop\HTL5\SWP-Rubner\Project\images\Lebkuchen.JPG'));

select * from rezept;

insert into rezept (Name, Anleitung) values ('Rumkugeln', 'geiler scheiss he');

